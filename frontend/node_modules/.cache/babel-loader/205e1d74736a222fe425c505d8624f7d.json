{"ast":null,"code":"import { GET_ERRORS } from './ErrorsReducer';\nimport { CREATE_MESSAGE } from \"./MessageReducer\";\nimport { createMessage } from './MessageReducer';\nimport { authAPI, profileAPI } from \"../../api\";\nimport { USER_LOADING, ACTIVATE_USER, LOGIN_SUCCESS, LOGOUT_SUCCESS, REGISTER_SUCCESS, USER_LOADED } from \"./AuthTypes\";\nlet initialState = {\n  auth_token: localStorage.getItem('auth_token'),\n  isAuthenticated: null,\n  isLoading: false,\n  activated: 0,\n  user: JSON.parse(localStorage.getItem('user'))\n};\nexport const AuthReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ACTIVATE_USER:\n      return { ...state,\n        activated: action.payload\n      };\n\n    case USER_LOADING:\n      return { ...state,\n        isLoading: !state.isLoading\n      };\n\n    case USER_LOADED:\n      localStorage.setItem('user', JSON.stringify(action.payload));\n      return { ...state,\n        isAuthenticated: true,\n        isLoading: false,\n        user: action.payload\n      };\n\n    case LOGIN_SUCCESS:\n      if (action.payload.auth_token != null) {\n        localStorage.setItem('auth_token', action.payload.auth_token);\n      }\n\n      return { ...state,\n        ...action.payload,\n        isAuthenticated: true,\n        isLoading: false\n      };\n\n    case REGISTER_SUCCESS:\n      return { ...state,\n        auth_token: null,\n        user: action.payload,\n        isLoading: false\n      };\n\n    case LOGOUT_SUCCESS:\n      debugger;\n      localStorage.removeItem('auth_token');\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      return { ...state,\n        auth_token: null,\n        user: null,\n        isAuthenticated: false,\n        isLoading: false\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst loadUserSuccess = () => ({\n  type: USER_LOADING\n});\n\nconst loginSuccess = payload => ({\n  type: LOGIN_SUCCESS,\n  payload\n});\n\nconst getUserSuccess = payload => ({\n  type: USER_LOADED,\n  payload\n});\n\nconst logoutSuccess = () => ({\n  type: LOGOUT_SUCCESS\n});\n\nconst registerSuccess = user => ({\n  type: REGISTER_SUCCESS,\n  payload: user\n});\n\nconst activatedSuccessful = payload => ({\n  type: ACTIVATE_USER,\n  payload\n});\n\nexport const loadUser = () => async (dispatch, getState) => {\n  debugger;\n  dispatch(loadUserSuccess());\n  const response = await authAPI.getUser(tokenConfig(getState));\n  dispatch(getUserSuccess(response.data));\n};\nexport const Logout = () => async (dispatch, getState) => {\n  dispatch(loadUserSuccess());\n  await authAPI.logout(tokenConfig(getState)).then(() => dispatch(logoutSuccess()));\n  dispatch(loadUserSuccess());\n};\nexport const login = (email, password) => {\n  return async (dispatch, getState) => {\n    const body = JSON.stringify({\n      email,\n      password\n    });\n\n    try {\n      dispatch(loadUserSuccess());\n      let response = await authAPI.login(body);\n      dispatch(loginSuccess(response.data));\n      dispatch(createMessage({\n        log_in_ed: \"Logged successful\"\n      }));\n      const res = await authAPI.getUser(tokenConfig(getState));\n      dispatch(getUserSuccess(res.data));\n    } catch (err) {\n      const errors = {\n        msg: err.response.data,\n        status: err.response.status\n      };\n      dispatch({\n        type: GET_ERRORS,\n        payload: errors\n      });\n    }\n\n    dispatch(loadUserSuccess);\n  };\n};\nexport const register = (email, first_name, last_name, password) => async dispatch => {\n  const body = JSON.stringify({\n    first_name,\n    last_name,\n    password,\n    email\n  });\n\n  try {\n    dispatch(loadUserSuccess());\n    const response = await authAPI.register(body);\n    dispatch(registerSuccess(response.data));\n    dispatch({\n      type: CREATE_MESSAGE,\n      payload: {\n        registered: \"Check your email!\"\n      }\n    });\n    await profileAPI.PostProfile(response.data.id);\n    await profileAPI.PostDocuments(response.data.id);\n    dispatch(loadUserSuccess);\n  } catch (err) {\n    const error = {\n      msg: err.response.data,\n      status: err.response.status\n    };\n    dispatch({\n      payload: error,\n      type: GET_ERRORS\n    });\n  }\n\n  dispatch(loadUserSuccess);\n};\nexport const ActivateUser = body => async (dispatch, getState) => {\n  debugger;\n  const body1 = {\n    email: localStorage.getItem('email'),\n    password: localStorage.getItem('password')\n  };\n\n  try {\n    const response1 = await authAPI.activate(body);\n    dispatch(activatedSuccessful(response1.data));\n    dispatch(loadUserSuccess());\n    debugger;\n    let response = await authAPI.login(body1);\n    debugger;\n    dispatch(loginSuccess(response.data));\n    dispatch({\n      type: CREATE_MESSAGE,\n      payload: {\n        log_in_ed: \"Logged successful\"\n      }\n    });\n    const res = await authAPI.getUser(tokenConfig(getState));\n    dispatch(getUserSuccess(res.data));\n  } catch (err) {\n    const errors = {\n      msg: err.response.data,\n      status: err.response.status\n    };\n    dispatch({\n      type: GET_ERRORS,\n      payload: errors\n    });\n  }\n};\nexport const tokenConfig = getState => {\n  debugger;\n  const auth_token = getState().auth.auth_token;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  if (auth_token) {\n    config.headers['Authorization'] = `Token ${auth_token}`;\n  }\n\n  return config;\n};","map":{"version":3,"sources":["/home/seva/Desktop/textilespot-master/frontend/src/redux/reducers/AuthReducer.tsx"],"names":["GET_ERRORS","CREATE_MESSAGE","createMessage","authAPI","profileAPI","USER_LOADING","ACTIVATE_USER","LOGIN_SUCCESS","LOGOUT_SUCCESS","REGISTER_SUCCESS","USER_LOADED","initialState","auth_token","localStorage","getItem","isAuthenticated","isLoading","activated","user","JSON","parse","AuthReducer","state","action","type","payload","setItem","stringify","removeItem","loadUserSuccess","loginSuccess","getUserSuccess","logoutSuccess","registerSuccess","activatedSuccessful","loadUser","dispatch","getState","response","getUser","tokenConfig","data","Logout","logout","then","login","email","password","body","log_in_ed","res","err","errors","msg","status","register","first_name","last_name","registered","PostProfile","id","PostDocuments","error","ActivateUser","body1","response1","activate","auth","config","headers"],"mappings":"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","sourcesContent":["import {GET_ERRORS} from './ErrorsReducer'\nimport {CREATE_MESSAGE} from \"./MessageReducer\";\nimport {createMessage} from './MessageReducer'\nimport {authAPI, profileAPI} from \"../../api\"\nimport {AuthActionTypes, USER_LOADING, ACTIVATE_USER, LOGIN_SUCCESS, LOGOUT_SUCCESS, REGISTER_SUCCESS, USER_LOADED,} from \"./AuthTypes\";\nimport {Dispatch} from \"redux\";\nimport {AppStateType} from \"../redux_store\";\nimport {ThunkAction} from \"redux-thunk\";\n\nexport type GetStateType = () => AppStateType\n\n\nexport type initialStateTypes = {\n    auth_token: any ,\n    isAuthenticated: boolean | null,\n    isLoading: boolean | null,\n    activated: number | null,\n    user: any}\n\nlet initialState : initialStateTypes = {\n    auth_token: localStorage.getItem('auth_token'),\n    isAuthenticated: null,\n    isLoading: false,\n    activated: 0,\n    user: JSON.parse(localStorage.getItem('user') as string),\n\n}\n\nexport const AuthReducer = (state = initialState, action: AuthActionTypes): initialStateTypes => {\n\n    switch (action.type) {\n        case ACTIVATE_USER:\n            return {...state, activated: action.payload}\n        case USER_LOADING :\n            return {...state, isLoading: !state.isLoading}\n        case USER_LOADED:\n            localStorage.setItem('user', JSON.stringify(action.payload))\n            return {...state, isAuthenticated: true, isLoading: false, user: action.payload}\n        case LOGIN_SUCCESS:\n            if (action.payload.auth_token != null) {\n                localStorage.setItem('auth_token', action.payload.auth_token)\n            }\n            return {\n                ...state, ...action.payload, isAuthenticated: true, isLoading: false\n            }\n        case REGISTER_SUCCESS:\n            return {...state, auth_token:null, user:action.payload, isLoading: false}\n        case LOGOUT_SUCCESS:\n            debugger\n            localStorage.removeItem('auth_token');\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            return {...state, auth_token: null, user: null, isAuthenticated: false, isLoading: false}\n        default:\n            return state\n    }\n}\n\nconst loadUserSuccess = (): AuthActionTypes => ({type: USER_LOADING})\nconst loginSuccess = (payload: { auth_token: any }): AuthActionTypes => ({type: LOGIN_SUCCESS, payload})\nconst getUserSuccess = (payload: {\n        first_name: string, id: number, email: string }): AuthActionTypes => ({type: USER_LOADED, payload})\nconst logoutSuccess = (): AuthActionTypes => ({type: LOGOUT_SUCCESS})\nconst registerSuccess = (user: any): AuthActionTypes => ({type: REGISTER_SUCCESS, payload: user})\nconst activatedSuccessful = (payload: any): AuthActionTypes => ({type: ACTIVATE_USER, payload})\n\n\nexport const loadUser = () => async (dispatch: Dispatch<AuthActionTypes>, getState: () => AppStateType) => {\n    debugger\n    dispatch(loadUserSuccess());\n\n    const response = await authAPI.getUser(tokenConfig(getState))\n    dispatch(getUserSuccess(response.data));\n}\n\nexport const Logout = () =>  async (dispatch: Dispatch<AuthActionTypes>, getState: () => AppStateType) => {\n    dispatch(loadUserSuccess())\n    await authAPI.logout(tokenConfig(getState)).then(() =>dispatch(logoutSuccess()))\n    dispatch(loadUserSuccess())\n    }\n\n\nexport const login = (email: string, password: string) => {\n    return async (dispatch: Dispatch<any>, getState: GetStateType) => {\n\n        const body = JSON.stringify({email, password})\n        try {\n            dispatch(loadUserSuccess());\n            let response: any = await authAPI.login(body)\n            dispatch(loginSuccess(response.data))\n            dispatch(createMessage({log_in_ed: \"Logged successful\"}))\n            const res = await authAPI.getUser(tokenConfig(getState))\n            dispatch(getUserSuccess(res.data));\n\n\n        } catch (err) {\n            const errors = {\n                msg: err.response.data,\n                status: err.response.status\n            }\n            dispatch({\n                type: GET_ERRORS,\n                payload: errors\n            })\n\n\n        }\n        dispatch(loadUserSuccess)\n    };\n}\n\nexport const register = (email: string, first_name: string, last_name: string, password: string): ThunkAction<Promise<void>, AppStateType, any, AuthActionTypes> => async (dispatch) => {\n\n    const body = JSON.stringify({first_name, last_name, password, email})\n    try {\n\n        dispatch(loadUserSuccess());\n        const response = await authAPI.register(body)\n        dispatch(registerSuccess(response.data))\n        dispatch({\n            type: CREATE_MESSAGE,\n            payload: {registered: \"Check your email!\"}})\n        await profileAPI.PostProfile(response.data.id)\n        await profileAPI.PostDocuments(response.data.id)\n        dispatch(loadUserSuccess)\n    } catch (err) {\n        const error = {\n            msg: err.response.data,\n            status: err.response.status\n        }\n        dispatch({\n            payload: error,\n            type: GET_ERRORS\n        })\n    }\n    dispatch(loadUserSuccess)\n}\nexport const ActivateUser = (body: any): ThunkAction<Promise<void>, AppStateType, unknown, AuthActionTypes> => async (dispatch, getState) => {\n    debugger\n    const body1 = {\n        email: localStorage.getItem('email'),\n        password: localStorage.getItem('password')}\n    try {\n        const  response1 = await authAPI.activate(body)\n        dispatch(activatedSuccessful(response1.data))\n        dispatch(loadUserSuccess());\n        debugger\n        let response = await authAPI.login(body1)\n        debugger\n        dispatch(loginSuccess(response.data))\n        dispatch({\n            type: CREATE_MESSAGE,\n            payload: {log_in_ed: \"Logged successful\"}})\n        const res = await authAPI.getUser(tokenConfig(getState))\n        dispatch(getUserSuccess(res.data));\n\n\n    } catch (err) {\n        const errors = {\n            msg: err.response.data,\n            status: err.response.status\n        }\n        dispatch({\n            type: GET_ERRORS,\n            payload: errors\n        })\n\n\n    }\n}\n\nexport const tokenConfig = (getState: GetStateType) => {\n    debugger\n    const auth_token = getState().auth.auth_token;\n\n    const config: any = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n\n    if (auth_token) {\n        config.headers['Authorization'] = `Token ${auth_token}`;\n    }\n\n\n    return config\n}"]},"metadata":{},"sourceType":"module"}