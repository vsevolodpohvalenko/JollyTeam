{"ast":null,"code":"import { GET_ERRORS } from './ErrorsReducer';\nimport { createMessage } from './MessageReducer';\nimport { authAPI, profileAPI } from \"../../api\";\nconst USER_LOADING = 'USER_LOADING';\nconst USER_LOADED = 'USER_LOADED';\nconst LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nconst LOGOUT_SUCCESS = 'LOGOUT_SUCCESS';\nconst REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nconst ACTIVATE_USER = 'ACTIVATE_USER';\nlet initialState = {\n  auth_token: localStorage.getItem('auth_token'),\n  isAuthenticated: null,\n  isLoading: false,\n  activated: 0,\n  user: JSON.parse(localStorage.getItem('user'))\n};\nexport const AuthReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ACTIVATE_USER:\n      return { ...state,\n        activated: action.payload\n      };\n\n    case USER_LOADING:\n      return { ...state,\n        isLoading: !state.isLoading\n      };\n\n    case USER_LOADED:\n      localStorage.setItem('user', JSON.stringify(action.payload));\n      return { ...state,\n        isAuthenticated: true,\n        isLoading: false,\n        user: action.payload\n      };\n\n    case LOGIN_SUCCESS:\n      localStorage.setItem('auth_token', action.payload.auth_token);\n      return { ...state,\n        ...action.payload,\n        isAuthenticated: true,\n        isLoading: false\n      };\n\n    case REGISTER_SUCCESS:\n      return { ...state,\n        auth_token: null,\n        user: action.payload,\n        isLoading: false\n      };\n\n    case LOGOUT_SUCCESS:\n      debugger;\n      localStorage.removeItem('auth_token');\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      return { ...state,\n        auth_token: null,\n        user: null,\n        isAuthenticated: false,\n        isLoading: false\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst loadUserSuccess = () => ({\n  type: USER_LOADING\n});\n\nconst loginSuccess = payload => ({\n  type: LOGIN_SUCCESS,\n  payload\n});\n\nconst getUserSuccess = payload => ({\n  type: USER_LOADED,\n  payload\n});\n\nconst logoutSuccess = () => ({\n  type: LOGOUT_SUCCESS\n});\n\nconst registerSuccess = user => ({\n  type: REGISTER_SUCCESS,\n  payload: user\n});\n\nconst activatedSuccessful = payload => ({\n  type: ACTIVATE_USER,\n  payload\n});\n\nexport const loadUser = () => async (dispatch, getState) => {\n  debugger;\n  dispatch(loadUserSuccess());\n  const response = await authAPI.getUser(tokenConfig(getState));\n  dispatch(getUserSuccess(response.data));\n};\nexport const Logout = () => (dispatch, getState) => {\n  dispatch(loadUserSuccess);\n  authAPI.logout(tokenConfig(getState)).then(res => console.log(res.status), dispatch(logoutSuccess()));\n  dispatch(loadUserSuccess);\n};\nexport const login = (email, password) => {\n  return async (dispatch, getState) => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const body = JSON.stringify({\n      email,\n      password\n    });\n\n    try {\n      dispatch(loadUserSuccess());\n      let response = await authAPI.login(body);\n      dispatch(loginSuccess(response.data));\n      dispatch(createMessage({\n        logined: \"Loggined successful\"\n      }));\n      const res = await authAPI.getUser(tokenConfig(getState));\n      dispatch(getUserSuccess(res.data));\n    } catch (err) {\n      const errors = {\n        msg: err.response.data,\n        status: err.response.status\n      };\n      dispatch({\n        type: GET_ERRORS,\n        payload: errors\n      });\n    }\n\n    dispatch(loadUserSuccess);\n  };\n};\nexport const register = ({\n  email,\n  first_name,\n  last_name,\n  password\n}) => async dispatch => {\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body = JSON.stringify({\n    first_name,\n    last_name,\n    password,\n    email\n  });\n\n  try {\n    dispatch(loadUserSuccess());\n    const response = await authAPI.register(body);\n    dispatch(registerSuccess(response.data));\n    dispatch(createMessage({\n      registred: \"Check your email!\"\n    }));\n    await profileAPI.PostProfile(response.data.id);\n    await profileAPI.PostDocuments(response.data.id);\n    dispatch(loadUserSuccess);\n  } catch (err) {\n    const error = {\n      msg: err.response.data,\n      status: err.response.status\n    };\n    dispatch({\n      payload: error,\n      type: GET_ERRORS\n    });\n  }\n\n  dispatch(loadUserSuccess);\n};\nexport const ActivateUser = body => async (dispatch, getState) => {\n  debugger;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  const body1 = {\n    email: localStorage.getItem('email'),\n    password: localStorage.getItem('password')\n  };\n\n  try {\n    const response1 = await authAPI.activate(body);\n    dispatch(activatedSuccessful(response1.data));\n    dispatch(loadUserSuccess());\n    debugger;\n    let response = await authAPI.login(body1);\n    debugger;\n    dispatch(loginSuccess(response.data));\n    dispatch(createMessage({\n      logined: \"Loggined successful\"\n    }));\n    const res = await authAPI.getUser(tokenConfig(getState));\n    dispatch(getUserSuccess(res.data));\n  } catch (err) {\n    const errors = {\n      msg: err.response.data,\n      status: err.response.status\n    };\n    dispatch({\n      type: GET_ERRORS,\n      payload: errors\n    });\n  }\n};\nexport const tokenConfig = getState => {\n  debugger;\n  const auth_token = getState().auth.auth_token;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  if (auth_token) {\n    config.headers['Authorization'] = `Token ${auth_token}`;\n  }\n\n  return config;\n};","map":{"version":3,"sources":["/home/seva/Desktop/textilespot-master/frontend/src/redux/reducers/AuthReducer.tsx"],"names":["GET_ERRORS","createMessage","authAPI","profileAPI","USER_LOADING","USER_LOADED","LOGIN_SUCCESS","LOGOUT_SUCCESS","REGISTER_SUCCESS","ACTIVATE_USER","initialState","auth_token","localStorage","getItem","isAuthenticated","isLoading","activated","user","JSON","parse","AuthReducer","state","action","type","payload","setItem","stringify","removeItem","loadUserSuccess","loginSuccess","getUserSuccess","logoutSuccess","registerSuccess","activatedSuccessful","loadUser","dispatch","getState","response","getUser","tokenConfig","data","Logout","logout","then","res","console","log","status","login","email","password","config","headers","body","logined","err","errors","msg","register","first_name","last_name","registred","PostProfile","id","PostDocuments","error","ActivateUser","body1","response1","activate","auth"],"mappings":"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","sourcesContent":["import {GET_ERRORS} from './ErrorsReducer'\nimport {createMessage} from './MessageReducer'\nimport {authAPI, profileAPI} from \"../../api\"\nimport {AuthActionTypes} from \"./AuthTypes\";\n\nconst USER_LOADING = 'USER_LOADING'\nconst USER_LOADED = 'USER_LOADED'\nconst LOGIN_SUCCESS = 'LOGIN_SUCCESS'\nconst LOGOUT_SUCCESS = 'LOGOUT_SUCCESS'\nconst REGISTER_SUCCESS = 'REGISTER_SUCCESS'\nconst ACTIVATE_USER = 'ACTIVATE_USER'\n\ntype initialStateTypes = {\n    auth_token: string | null,\n    isAuthenticated: boolean | null,\n    isLoading: boolean,\n    activated: number,\n    user: any\n\n}\n\nlet initialState : initialStateTypes = {\n    auth_token: localStorage.getItem('auth_token'),\n    isAuthenticated: null,\n    isLoading: false,\n    activated: 0,\n    user: JSON.parse(localStorage.getItem('user')),\n\n}\n\nexport const AuthReducer = (state = initialState, action: AuthActionTypes): initialStateTypes => {\n\n    switch (action.type) {\n        case ACTIVATE_USER:\n            return {...state, activated: action.payload}\n        case USER_LOADING :\n            return {...state, isLoading: !state.isLoading}\n        case USER_LOADED:\n            localStorage.setItem('user', JSON.stringify(action.payload))\n            return {...state, isAuthenticated: true, isLoading: false, user: action.payload}\n        case LOGIN_SUCCESS:\n            localStorage.setItem('auth_token', action.payload.auth_token)\n            return {\n                ...state, ...action.payload, isAuthenticated: true, isLoading: false\n            }\n        case REGISTER_SUCCESS:\n            return {...state, auth_token:null, user:action.payload, isLoading: false}\n        case LOGOUT_SUCCESS:\n            debugger\n            localStorage.removeItem('auth_token');\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            return {...state, auth_token: null, user: null, isAuthenticated: false, isLoading: false}\n        default:\n            return state\n    }\n}\n\nconst loadUserSuccess = (): AuthActionTypes => ({type: USER_LOADING})\nconst loginSuccess = (payload): AuthActionTypes => ({type: LOGIN_SUCCESS, payload})\nconst getUserSuccess = (payload): AuthActionTypes => ({type: USER_LOADED, payload})\nconst logoutSuccess = (): AuthActionTypes => ({type: LOGOUT_SUCCESS})\nconst registerSuccess = (user): AuthActionTypes => ({type: REGISTER_SUCCESS, payload: user})\nconst activatedSuccessful = (payload): AuthActionTypes => ({type: ACTIVATE_USER, payload})\n\n\nexport const loadUser = () => async (dispatch, getState) => {\n    debugger\n    dispatch(loadUserSuccess());\n\n    const response = await authAPI.getUser(tokenConfig(getState))\n    dispatch(getUserSuccess(response.data));\n}\n\nexport const Logout = () =>  (dispatch, getState) => {\n    dispatch(loadUserSuccess)\n    authAPI.logout(tokenConfig(getState)).then(res =>console.log(res.status) ,dispatch(logoutSuccess()))\n    dispatch(loadUserSuccess)\n    }\n\n\nexport const login = (email, password) => {\n    return async (dispatch, getState) => {\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n            }\n        }\n\n        const body = JSON.stringify({email, password})\n        try {\n            dispatch(loadUserSuccess());\n            let response: any = await authAPI.login(body)\n            dispatch(loginSuccess(response.data))\n            dispatch(createMessage({logined: \"Loggined successful\"}))\n            const res = await authAPI.getUser(tokenConfig(getState))\n            dispatch(getUserSuccess(res.data));\n\n\n        } catch (err) {\n            const errors = {\n                msg: err.response.data,\n                status: err.response.status\n            }\n            dispatch({\n                type: GET_ERRORS,\n                payload: errors\n            })\n\n\n        }\n        dispatch(loadUserSuccess)\n    };\n}\n\nexport const register = ({email, first_name, last_name, password}) => async (dispatch) => {\n\n    const config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n    const body = JSON.stringify({first_name, last_name, password, email})\n    try {\n\n        dispatch(loadUserSuccess());\n        const response = await authAPI.register(body)\n        dispatch(registerSuccess(response.data))\n        dispatch(\n            createMessage({registred: \"Check your email!\"}))\n        await profileAPI.PostProfile(response.data.id)\n        await profileAPI.PostDocuments(response.data.id)\n        dispatch(loadUserSuccess)\n    } catch (err) {\n        const error = {\n            msg: err.response.data,\n            status: err.response.status\n        }\n        dispatch({\n            payload: error,\n            type: GET_ERRORS\n        })\n    }\n    dispatch(loadUserSuccess)\n}\nexport const ActivateUser = (body) => async (dispatch, getState) => {\n    debugger\n\n\n    const config: any = {\n        headers: {\n            'Content-Type': 'application/json',\n        }\n    }\n\n    const body1 = {\n        email: localStorage.getItem('email'),\n        password: localStorage.getItem('password')}\n    try {\n        const  response1 = await authAPI.activate(body)\n        dispatch(activatedSuccessful(response1.data))\n        dispatch(loadUserSuccess());\n        debugger\n        let response = await authAPI.login(body1)\n        debugger\n        dispatch(loginSuccess(response.data))\n        dispatch(createMessage({logined: \"Loggined successful\"}))\n        const res = await authAPI.getUser(tokenConfig(getState))\n        dispatch(getUserSuccess(res.data));\n\n\n    } catch (err) {\n        const errors = {\n            msg: err.response.data,\n            status: err.response.status\n        }\n        dispatch({\n            type: GET_ERRORS,\n            payload: errors\n        })\n\n\n    }\n}\n\nexport const tokenConfig = getState => {\n    debugger\n    const auth_token = getState().auth.auth_token;\n\n    const config: any = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    }\n\n    if (auth_token) {\n        config.headers['Authorization'] = `Token ${auth_token}`;\n    }\n\n\n    return config\n}"]},"metadata":{},"sourceType":"module"}